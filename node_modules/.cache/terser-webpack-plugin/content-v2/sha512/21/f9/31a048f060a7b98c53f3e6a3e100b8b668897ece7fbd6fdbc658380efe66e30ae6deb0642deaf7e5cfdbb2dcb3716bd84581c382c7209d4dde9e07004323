{"code":"!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&n&&\"string\"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p=\"\",e(e.s=4)}([function(t,n,e){\"use strict\";t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var e=function(t,n){var e=t[1]||\"\",o=t[3];if(!o)return e;if(n&&\"function\"==typeof btoa){var r=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(s),\"/*# \".concat(c,\" */\")),i=o.sources.map(function(t){return\"/*# sourceURL=\".concat(o.sourceRoot).concat(t,\" */\")});return[e].concat(i).concat([r]).join(\"\\n\")}var a,s,c;return[e].join(\"\\n\")}(n,t);return n[2]?\"@media \".concat(n[2],\"{\").concat(e,\"}\"):e}).join(\"\")},n.i=function(t,e){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var a=0;a<t.length;a++){var s=t[a];null!=s[0]&&o[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]=\"(\".concat(s[2],\") and (\").concat(e,\")\")),n.push(s))}},n}},function(t,n,e){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),s=function(t){var n={};return function(t,e){if(\"function\"==typeof t)return t();if(void 0===n[t]){var o=function(t,n){return n?n.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}n[t]=o}return n[t]}}(),c=null,f=0,l=[],d=e(7);function u(t,n){for(var e=0;e<t.length;e++){var o=t[e],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(m(o.parts[a],n))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(m(o.parts[a],n));i[o.id]={id:o.id,refs:1,parts:s}}}}function p(t,n){for(var e=[],o={},r=0;r<t.length;r++){var i=t[r],a=n.base?i[0]+n.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):e.push(o[a]={id:a,parts:[s]})}return e}function h(t,n){var e=s(t.insertInto);if(!e)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var o=l[l.length-1];if(\"top\"===t.insertAt)o?o.nextSibling?e.insertBefore(n,o.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),l.push(n);else if(\"bottom\"===t.insertAt)e.appendChild(n);else{if(\"object\"!=typeof t.insertAt||!t.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var r=s(t.insertAt.before,e);e.insertBefore(n,r)}}function b(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var n=l.indexOf(t);n>=0&&l.splice(n,1)}function g(t){var n=document.createElement(\"style\");if(void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),void 0===t.attrs.nonce){var o=function(){0;return e.nc}();o&&(t.attrs.nonce=o)}return v(n,t.attrs),h(t,n),n}function v(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function m(t,n){var e,o,r,i;if(n.transform&&t.css){if(!(i=\"function\"==typeof n.transform?n.transform(t.css):n.transform.default(t.css)))return function(){};t.css=i}if(n.singleton){var a=f++;e=c||(c=g(n)),o=w.bind(null,e,a,!1),r=w.bind(null,e,a,!0)}else t.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(e=function(t){var n=document.createElement(\"link\");return void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),t.attrs.rel=\"stylesheet\",v(n,t.attrs),h(t,n),n}(n),o=function(t,n,e){var o=e.css,r=e.sourceMap,i=void 0===n.convertToAbsoluteUrls&&r;(n.convertToAbsoluteUrls||i)&&(o=d(o));r&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\");var a=new Blob([o],{type:\"text/css\"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,e,n),r=function(){b(e),e.href&&URL.revokeObjectURL(e.href)}):(e=g(n),o=function(t,n){var e=n.css,o=n.media;o&&t.setAttribute(\"media\",o);if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}.bind(null,e),r=function(){b(e)});return o(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;o(t=n)}else r()}}t.exports=function(t,n){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(n=n||{}).attrs=\"object\"==typeof n.attrs?n.attrs:{},n.singleton||\"boolean\"==typeof n.singleton||(n.singleton=a()),n.insertInto||(n.insertInto=\"head\"),n.insertAt||(n.insertAt=\"bottom\");var e=p(t,n);return u(e,n),function(t){for(var o=[],r=0;r<e.length;r++){var a=e[r];(s=i[a.id]).refs--,o.push(s)}t&&u(p(t,n),n);for(r=0;r<o.length;r++){var s;if(0===(s=o[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var x,y=(x=[],function(t,n){return x[t]=n,x.filter(Boolean).join(\"\\n\")});function w(t,n,e,o){var r=e?\"\":o.css;if(t.styleSheet)t.styleSheet.cssText=y(n,r);else{var i=document.createTextNode(r),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(i,a[n]):t.appendChild(i)}}},function(t,n,e){function o(t,n){this.msg=t,this.dismissTime=n||1e3,this.createToast(),this.showToast()}e(9),o.prototype={createToast:function(){var t='<div class=\"toast\">'+this.msg+\"</div>\";this.$toast=$(t),$(\"body\").append(this.$toast)},showToast:function(){var t=this;this.$toast.fadeIn(300,function(){setTimeout(function(){t.$toast.fadeOut(300,function(){t.$toast.remove()})},t.dismissTime)})}},t.exports.Toast=function(t,n){return new o(t,n)}},function(t,n){var e,o=(e={},{on:function(t,n){e[t]=e[t]||[],e[t].push({handler:n})},fire:function(t,n){if(e[t])for(var o=0;o<e[t].length;o++)e[t][o].handler(n)}});t.exports=o},function(t,n,e){e(5);var o=e(8).NoteManager,r=e(3),i=e(14);o.load(),$(\".add-note\").on(\"click\",function(){o.add()}),r.on(\"waterfall\",function(){i.init($(\"#content\"))})},function(t,n,e){var o=e(6);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(1)(o,r);o.locals&&(t.exports=o.locals)},function(t,n,e){(t.exports=e(0)(!1)).push([t.i,\"html,\\nbody {\\n  margin: 0;\\n  height: 100%;\\n}\\nul,\\nli {\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n}\\nbody {\\n  font: 14px/1.4 'Arial';\\n}\\na {\\n  text-decoration: none;\\n  color: #fff;\\n}\\n#header {\\n  height: 30px;\\n  font-size: 12px;\\n}\\n#header a {\\n  display: block;\\n  font-size: 12px;\\n  margin-top: 6px;\\n}\\n#header .user-area {\\n  padding-right: 16px;\\n  float: right;\\n}\\n#header .user-area li {\\n  float: left;\\n  margin-left: 5px;\\n}\\n#header .user-area li span {\\n  color: #fff;\\n  display: block;\\n  margin-top: 6px;\\n}\\n#header .user-area img {\\n  height: 18px;\\n  margin-top: 5px;\\n  border-radius: 50%;\\n}\\n#header .setting {\\n  float: right;\\n  margin-left: 9px;\\n  display: none;\\n}\\n#header .add-note {\\n  float: left;\\n  margin-left: 16px;\\n  border: 1px solid #fff;\\n  border-radius: 4px;\\n  padding: 2px 4px;\\n}\\n#header .login {\\n  float: right;\\n  margin-left: 16px;\\n}\\n#content {\\n  position: relative;\\n  height: -webkit-calc(70%);\\n  height: calc(100% - 30px);\\n}\\n@keyframes move-twink-back {\\n  from {\\n    background-position: 0 0;\\n  }\\n  to {\\n    background-position: -10000px 5000px;\\n  }\\n}\\n.stars,\\n.twinkling {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  display: block;\\n}\\n.stars {\\n  background: #000 url(http://7xpvnv.com2.z0.glb.qiniucdn.com/ba25c630-1c91-4ac1-a3de-65555d78c147.png) repeat top center;\\n  z-index: -2;\\n}\\n.twinkling {\\n  background: transparent url(http://7xpvnv.com2.z0.glb.qiniucdn.com/493b97e6-c499-4b41-a26b-8942873615b0.png) repeat top center;\\n  z-index: -1;\\n  animation: move-twink-back 200s linear infinite;\\n}\\n\",\"\"])},function(t,n){t.exports=function(t){var n=\"undefined\"!=typeof window&&window.location;if(!n)throw new Error(\"fixUrls requires window.location\");if(!t||\"string\"!=typeof t)return t;var e=n.protocol+\"//\"+n.host,o=e+n.pathname.replace(/\\/[^\\/]*$/,\"/\");return t.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(t,n){var r,i=n.trim().replace(/^\"(.*)\"$/,function(t,n){return n}).replace(/^'(.*)'$/,function(t,n){return n});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(i)?t:(r=0===i.indexOf(\"//\")?i:0===i.indexOf(\"/\")?e+i:o+i.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(r)+\")\")})}},function(t,n,e){var o=e(2).Toast,r=e(11).Note,i=(o=e(2).Toast,e(3)),a={load:function(){$.get(\"/api/notes\").done(function(t){0==t.status?($.each(t.data,function(t,n){new r({id:n.id,context:n.text,username:n.username})}),i.fire(\"waterfall\")):o(t.errorMsg)}).fail(function(){o(\"网络异常\")})},add:function(){new r}};t.exports.NoteManager=a},function(t,n,e){var o=e(10);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(1)(o,r);o.locals&&(t.exports=o.locals)},function(t,n,e){(t.exports=e(0)(!1)).push([t.i,\".toast {\\n  position: fixed;\\n  left: 50%;\\n  transform: translateX(-50%);\\n  bottom: 20px;\\n  color: #D15A39;\\n  background: #fff;\\n  padding: 5px 10px;\\n  border-radius: 3px;\\n  box-shadow: 0px 0px 3px 1px rgba(255, 255, 255, 0.6);\\n  display: none;\\n}\\n\",\"\"])},function(t,n,e){e(12);var o=e(2).Toast,r=e(3);function i(t){this.initOpts(t),this.createNote(),this.setStyle(),this.bindEvent()}i.prototype={colors:[[\"#ea9b35\",\"#efb04e\"],[\"#dd598b\",\"#e672a2\"],[\"#eee34b\",\"#f2eb67\"],[\"#c24226\",\"#d15a39\"],[\"#c1c341\",\"#d0d25c\"],[\"#3f78c3\",\"#5591d2\"]],defaultOpts:{id:\"\",$ct:$(\"#content\").length>0?$(\"#content\"):$(\"body\"),context:\"input here\"},initOpts:function(t){this.opts=$.extend({},this.defaultOpts,t||{}),this.opts.id&&(this.id=this.opts.id)},createNote:function(){this.$note=$('<div class=\"note\"><div class=\"note-head\"><span class=\"username\"></span><span class=\"delete\">&times;</span></div><div class=\"note-ct\" contenteditable=\"true\"></div></div>'),this.$note.find(\".note-ct\").text(this.opts.context),this.$note.find(\".username\").text(this.opts.username),this.opts.$ct.append(this.$note),this.id||this.$note.css(\"bottom\",\"10px\")},setStyle:function(){var t=this.colors[Math.floor(6*Math.random())];this.$note.find(\".note-head\").css(\"background-color\",t[0]),this.$note.find(\".note-ct\").css(\"background-color\",t[1])},setLayout:function(){this.clk&&clearTimeout(this.clk),this.clk=setTimeout(function(){r.fire(\"waterfall\")},100)},bindEvent:function(){var t=this,n=this.$note,e=n.find(\".note-head\"),o=n.find(\".note-ct\");n.find(\".delete\").on(\"click\",function(){t.delete()}),o.on(\"focus\",function(){\"input here\"==o.html()&&o.html(\"\"),o.data(\"before\",o.html())}).on(\"blur paste\",function(){o.data(\"before\")!=o.html()&&(o.data(\"before\",o.html()),t.setLayout(),t.id?t.edit(o.html()):t.add(o.html()))}),e.on(\"mousedown\",function(t){var e=t.pageX-n.offset().left,o=t.pageY-n.offset().top;n.addClass(\"draggable\").data(\"evtPos\",{x:e,y:o})}).on(\"mouseup\",function(){n.removeClass(\"draggable\").removeData(\"pos\")}),$(\"body\").on(\"mousemove\",function(t){$(\".draggable\").length&&$(\".draggable\").offset({top:t.pageY-$(\".draggable\").data(\"evtPos\").y,left:t.pageX-$(\".draggable\").data(\"evtPos\").x})})},edit:function(t){$.post(\"/api/notes/edit\",{id:this.id,note:t}).done(function(t){0===t.status?o(\"update success\"):o(t.errorMsg)})},add:function(t){console.log(\"addd...\");var n=this;$.post(\"/api/notes/add\",{note:t}).done(function(t){0===t.status?o(\"add success\"):(n.$note.remove(),r.fire(\"waterfall\"),o(t.errorMsg))})},delete:function(){var t=this;$.post(\"/api/notes/delete\",{id:this.id}).done(function(n){0===n.status?(o(\"delete success\"),t.$note.remove(),r.fire(\"waterfall\")):o(n.errorMsg)})}},t.exports.Note=i},function(t,n,e){var o=e(13);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(1)(o,r);o.locals&&(t.exports=o.locals)},function(t,n,e){(t.exports=e(0)(!1)).push([t.i,\".note {\\n  position: absolute;\\n  color: #333;\\n  width: 160px;\\n  margin: 20px 10px;\\n  transition: all 0.5s;\\n}\\n.note .note-head {\\n  height: 20px;\\n  background-color: #ea9b35;\\n  cursor: move;\\n  font-size: 12px;\\n  line-height: 20px;\\n  padding-left: 10px;\\n  color: #666;\\n}\\n.note .note-head:hover .delete {\\n  opacity: 1;\\n}\\n.note .note-head:before {\\n  position: absolute;\\n  left: 50%;\\n  top: -11px;\\n  margin-left: -32px;\\n  content: ' ';\\n  display: block;\\n  width: 64px;\\n  height: 18px;\\n  background: #35bba3;\\n}\\n.note .note-head:after {\\n  position: absolute;\\n  left: 50%;\\n  margin-left: 32px;\\n  top: -11px;\\n  z-index: -1;\\n  content: '';\\n  display: block;\\n  width: 0;\\n  height: 0;\\n  border-left: 5px solid #299683;\\n  border-top: 18px solid transparent;\\n}\\n.note .note-ct {\\n  padding: 10px;\\n  background-color: #efb04e;\\n  outline: none;\\n}\\n.note .delete {\\n  position: absolute;\\n  top: 4px;\\n  right: 4px;\\n  font-size: 12px;\\n  color: #fff;\\n  cursor: pointer;\\n  opacity: 0;\\n  transition: opacity 0.3s;\\n}\\n.draggable {\\n  opacity: 0.8;\\n  cursor: move;\\n  transition: none;\\n}\\n\",\"\"])},function(t,n){var e=function(){var t,n;function e(e){for(var o=(n=(t=e).children()).outerWidth(!0),r=parseInt($(window).width()/o),i=[],a=0;a<r;a++)i.push(0);n.each(function(){for(var t=$(this),n=0,e=i[0],r=0;r<i.length;r++)i[r]<e&&(n=r,e=i[r]);t.css({left:o*n,top:e}),i[n]=t.outerHeight(!0)+i[n]})}return $(window).on(\"resize\",function(){e(t)}),{init:e}}();t.exports=e}]);","extractedComments":[]}